local player = game:GetService("Players").LocalPlayer
local oldGUI = player:FindFirstChild("PlayerGui"):FindFirstChild("BatCanHub")
if oldGUI then oldGUI:Destroy() end
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "BatCanHub"

-- N√∫t m·ªü/t·∫Øt hub
local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0, 45, 0, 45)
toggleButton.Position = UDim2.new(0, 10, 0.5, -22)
toggleButton.Text = "BCB"
toggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
toggleButton.TextColor3 = Color3.new(1, 1, 1)
local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(1, 0)
uiCorner.Parent = toggleButton
toggleButton.TextSize = 16
toggleButton.Font = Enum.Font.SourceSansBold
toggleButton.Parent = gui
toggleButton.BorderSizePixel = 0
toggleButton.ZIndex = 2
toggleButton.AutoButtonColor = true
toggleButton.ClipsDescendants = true
toggleButton.AnchorPoint = Vector2.new(0, 0)
toggleButton.Draggable = true

-- Khung hub ch√≠nh
local hubFrame = Instance.new("Frame")
hubFrame.Size = UDim2.new(0, 250, 0, 250)
hubFrame.Position = UDim2.new(0.5, -125, 0.5, -110)
hubFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
hubFrame.Visible = false
hubFrame.Active = true
hubFrame.Draggable = true
hubFrame.Parent = gui

local function createButton(name, text, positionY)
	local title = Instance.new("TextLabel")
	title.Size = UDim2.new(1, 0, 0, 30)
	title.Position = UDim2.new(0, 0, 0, 0)
	title.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	title.Text = "üî• B√°t Can Board V1 üî•"
	title.TextColor3 = Color3.new(1, 1, 1)
	title.Font = Enum.Font.SourceSansBold
	title.TextSize = 18
	title.Parent = hubFrame
	local btn = Instance.new("TextButton")
	btn.Name = name
	btn.Size = UDim2.new(0.8, 0, 0, 40)
	btn.Position = UDim2.new(0.1, 0, 0, positionY)
	btn.Text = text
	btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	btn.TextColor3 = Color3.new(1, 1, 1)
	btn.Font = Enum.Font.SourceSans
	btn.TextSize = 16
	btn.Parent = hubFrame
	return btn
end

-- C√°c n√∫t
local setBtn = createButton("SetPart", "ƒê·∫∑t V·ªã Tr√≠", 40)
local tpBtn = createButton("TPPart", "Tele ƒê·∫øn V·ªã Tr√≠", 90)
local noclipBtn = createButton("Noclip", "‚ùåNoclip Off", 140)
-- √î nh·∫≠p speed
local speedBox = Instance.new("TextBox")
speedBox.Size = UDim2.new(0.5, -5, 0, 35)
speedBox.Position = UDim2.new(0.1, 0, 0, 190)
speedBox.PlaceholderText = "Speed..."
speedBox.Text = ""
speedBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
speedBox.TextColor3 = Color3.fromRGB(0, 0, 0)
speedBox.Font = Enum.Font.SourceSans
speedBox.TextSize = 16
speedBox.ClearTextOnFocus = false
speedBox.Parent = hubFrame

local applyBtn = Instance.new("TextButton")
applyBtn.Size = UDim2.new(0.3, 0, 0, 35)
applyBtn.Position = UDim2.new(0.6, 5, 0, 190)
applyBtn.Text = "Apply"
applyBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
applyBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
applyBtn.Font = Enum.Font.SourceSansBold
applyBtn.TextSize = 16
applyBtn.Parent = hubFrame

-- Toggle hi·ªán/·∫©n hub
toggleButton.MouseButton1Click:Connect(function()
	hubFrame.Visible = not hubFrame.Visible
end)

-- ===== CH·ª®C NƒÇNG =====

local savedPart = nil
local noclip = false
local connection

-- Set Part
setBtn.MouseButton1Click:Connect(function()
	if savedPart then
		savedPart:Destroy()
	end
	local char = player.Character
	if char and char:FindFirstChild("HumanoidRootPart") then
		local marker = Instance.new("Part")
		marker.Size = Vector3.new(4, 1, 4)
		marker.Position = char.HumanoidRootPart.Position + Vector3.new(0, 1, 0)
		marker.Anchored = true
		marker.CanCollide = false
		marker.Transparency = 0.5
		marker.Color = Color3.fromRGB(255, 255, 0)
		marker.Name = "TeleportMarker"
		marker.Parent = workspace
		savedPart = marker
	end
end)

-- Teleport
tpBtn.MouseButton1Click:Connect(function()
	if savedPart and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
		player.Character.HumanoidRootPart.CFrame = CFrame.new(savedPart.Position + Vector3.new(0, 3, 0))
	end
end)

-- Noclip
noclipBtn.MouseButton1Click:Connect(function()
	noclip = not noclip
	if noclip then
		connection = game:GetService("RunService").Stepped:Connect(function()
			for _, part in pairs(player.Character:GetDescendants()) do
				if part:IsA("BasePart") then
					part.CanCollide = false
				end
			end
		end)
		noclipBtn.Text = "‚úÖNoclip ON"
	else
		if connection then connection:Disconnect() end
		for _, part in pairs(player.Character:GetDescendants()) do
			if part:IsA("BasePart") then
				part.CanCollide = true
			end
		end
		noclipBtn.Text = "‚ùåNoclip Off"
	end
end)
-- Apply Speed
applyBtn.MouseButton1Click:Connect(function()
	local value = tonumber(speedBox.Text)
	if value and player.Character and player.Character:FindFirstChild("Humanoid") then
		player.Character.Humanoid.WalkSpeed = value
	end
end)

player.CharacterAdded:Connect(function()
player.Character:WaitForChild("Humanoid").WalkSpeed = 16
	if savedPart and savedPart.Parent then
		savedPart:Destroy()
		savedPart = nil
	end
	-- Reset noclip
	noclip = false
	if connection then connection:Disconnect() end
	noclipBtn.Text = "‚ùåNoclip Off"
end)
